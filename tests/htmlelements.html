<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<meta name="viewport" content="width=800">
	<title>HTML*ELement</title>
	<link rel="stylesheet" type="text/css" href="testindex.css">
	<script src="testglobals.js"></script>
	<script src="testgeneric.js"></script>
	<style>
		table {width: 780px;}
		hr {color: var(--test15);}
		span.indent {
			display:inline-block;margin-left:10px;
		}
		.grey {color: grey;}
	</style>
</head>

<body>
	<table>
	<tr><td><h2>TorZillaPrint</h2></td></tr>
	<tr><td class="blurb"><a class="return" href="../index.html">return to TZP index</a></td></tr>
	</table>

	<table id="tb15">
		<col width="1%"><col width="99%">
		<thead><tr><th colspan="2">
			<div class="nav-title">HTML*Element
			<div class="nav-up"><span class="c perf" id="perf"></span></div>
			</div>
		</th></tr></thead>
		<tr><td colspan="2" class="intro">
			<span class="no_color"></span>
				<span class="btn15 btnfirst" onClick="run()">[ run ]</span>
				<input type="checkbox" id="optSort"> <span class="no_color">sort</span>
			</span>
		</td></tr>
		<tr><td colspan="2"><hr></td></tr>
		<tr><td colspan="2"></td></tr>
		<tr><td></td><td class="mono spaces" id="details">click counts to list their results here</td></tr>
	</table>
	<br>

<script>
'use strict';

s4 = s4.trim()
s6 = s6.trim()
s15 = s15.trim()

let oData = {}
const htmlList = {
	"group1": ["main", "1main", "hidden", "changes since FF115"],
	// changes since FF115 (at least on windows)
	// property added unless prefixed with a minus sign
	HTMLButtonElement: HTMLButtonElement.prototype,
		// ^ (122/nightly) popoverTargetElement, popoverTargetAction
	HTMLElement: HTMLElement.prototype,
		// ^ (117) oncancel
	HTMLIFrameElement: HTMLIFrameElement.prototype,
		// ^ (121) loading
	HTMLInputElement: HTMLInputElement.prototype,
		// ^ (116) dirName
	HTMLMediaElement: HTMLMediaElement.prototype,
		// ^ (116) setSinkId, sinkId
		// (122/nightly) showPopover, hidePopover, togglePopover, popover, onbeforetoggle, -ondragexit
		// (122/nightly) -ondragexit
	HTMLSelectElement: HTMLSelectElement.prototype,
		// ^ (122/nightly) showPicker
	HTMLTemplateElement: HTMLTemplateElement.prototype,
		// (122/nightly) shadowRootMode, shadowRootDelegatesFocus
	HTMLTextAreaElement: HTMLTextAreaElement.prototype,
		// ^ (116) dirName
	HTMLVideoElement: HTMLVideoElement.prototype,

	"group2": ["interesting", "2interesting", "hiddenk", "changes since FF102"],
	HTMLCanvasElement: HTMLCanvasElement.prototype,
	HTMLFormElement: HTMLFormElement.prototype,
	HTMLMetaElement: HTMLMetaElement.prototype,
	HTMLSourceElement: HTMLSourceElement.prototype,

	"group3": ["stable", "2stable", "hiddenv", "AFAICT since FF102 at least on desktop"],
	HTMLAnchorElement: HTMLAnchorElement.prototype,
	HTMLBodyElement: HTMLBodyElement.prototype,
	HTMLAreaElement: HTMLAreaElement.prototype,
	HTMLDialogElement: undefined, // FF98+ HTMLDialogElement.prototype,
	HTMLEmbedElement: HTMLEmbedElement.prototype,
	HTMLFieldSetElement: HTMLFieldSetElement.prototype,
	HTMLFrameElement: HTMLFrameElement.prototype,
	HTMLFrameSetElement: HTMLFrameSetElement.prototype,
	HTMLHRElement: HTMLHRElement.prototype,
	HTMLImageElement: HTMLImageElement.prototype,
	HTMLLabelElement: HTMLLabelElement.prototype,
	HTMLLinkElement: HTMLLinkElement.prototype,
	HTMLMeterElement: HTMLMeterElement.prototype,
	HTMLOListElement: HTMLOListElement.prototype,
	HTMLObjectElement: HTMLObjectElement.prototype,
	HTMLOptionElement: HTMLOptionElement.prototype,
	HTMLOptionsCollection: HTMLOptionsCollection.prototype,
	HTMLOutputElement: HTMLOutputElement.prototype,
	HTMLProgressElement: HTMLProgressElement.prototype,
	HTMLScriptElement: HTMLScriptElement.prototype,
	HTMLStyleElement: HTMLStyleElement.prototype,
	HTMLTableCellElement: HTMLTableCellElement.prototype,
	HTMLTableColElement: HTMLTableColElement.prototype,
	HTMLTableElement: HTMLTableElement.prototype,
	HTMLTableRowElement: HTMLTableRowElement.prototype,
	HTMLTableSectionElement: HTMLTableSectionElement.prototype,
	HTMLTrackElement: HTMLTrackElement.prototype,

	"group4": ["super boring","3boring","hiddenx", "really F boring"],
	HTMLAudioElement: HTMLAudioElement.prototype,
	HTMLBRElement: HTMLBRElement.prototype,
	HTMLBaseElement: HTMLBaseElement.prototype,
	HTMLDListElement: HTMLDListElement.prototype,
	HTMLDataElement: HTMLDataElement.prototype,
	HTMLDataListElement: HTMLDataListElement.prototype,
	HTMLDivElement: HTMLDivElement.prototype,
	HTMLDocument: HTMLDocument.prototype,
	HTMLHeadElement: HTMLHeadElement.prototype,
	HTMLHeadingElement: HTMLHeadingElement.prototype,
	HTMLHtmlElement: HTMLHtmlElement.prototype,
	HTMLLegendElement: HTMLLegendElement.prototype,
	HTMLLIElement: HTMLLIElement.prototype,
	HTMLMapElement: HTMLMapElement.prototype,
	HTMLModElement: HTMLModElement.prototype,
	HTMLOptGroupElement: HTMLOptGroupElement.prototype,
	HTMLParagraphElement: HTMLParagraphElement.prototype,
	HTMLPictureElement: HTMLPictureElement.prototype,
	HTMLPreElement: HTMLPreElement.prototype,
	HTMLQuoteElement: HTMLQuoteElement.prototype,
	HTMLSpanElement: HTMLSpanElement.prototype,
	HTMLTableCaptionElement: HTMLTableCaptionElement.prototype,
	HTMLTimeElement: HTMLTimeElement.prototype,
	HTMLTitleElement: HTMLTitleElement.prototype,
	HTMLUListElement: HTMLUListElement.prototype,
	HTMLUnknownElement: HTMLUnknownElement.prototype,
	// error
	//HTMLFormControlsCollection
}

try {
	if (HTMLDialogElement.prototype !== undefined) {
		htmlList["HTMLDialogElement"] = HTMLDialogElement.prototype
	}
} catch(e) {}

function run() {
	// e.g. https://developer.mozilla.org/en-US/docs/Web/API/HTMLAnchorElement

	let t0 = performance.now()
	let optSort = dom.optSort.checked
	try {
		let display = [], toggle = "", group = "", groups = []
		for (const k of Object.keys(htmlList)) {
			if (k.slice(0,5) === "group") {
				let name = htmlList[k][0]
				let byline = htmlList[k][3]
				group = htmlList[k][1]
				toggle = htmlList[k][2]
				groups.push(group)
				oData[group] = {}
				display.push(
					"<br><hr>"
					+ "<span id='label"+ toggle +"' class='btnfirst btn0' onClick=\"togglerows('"+ toggle +"','expand')\">[ expand ]</span> "
					+ "<span id='"+ group +"'></span> "
					+ name.toUpperCase() +" <span class='grey'>... "+ byline +"</span><br><br>"
				)
			} else if ("object" === typeof htmlList[k]) {
				if (optSort) {
					oData[group][k] = Object.getOwnPropertyNames(htmlList[k]).sort()
				} else {
					oData[group][k] = Object.getOwnPropertyNames(htmlList[k])
				}
				let hash = mini(oData[group][k])
				display.push(
					s15 + k.padStart(25) + sc + ": "+ hash + s15 +" ("+ oData[group][k].length +")"+ sc +"<br>"+
					"<span class='tog" + toggle +" hidden grey'>[<br>" + "<span class='indent'>" + oData[group][k].join(", ") +"</span>" + "<br>]</span>"
				)
			}
		}
		let strAll = s15 +"ALL"+ sc +": "+ s6 + mini(oData) + sc
			+ " <span class='btn15 btnc' onclick='console.log(oData)'>[console]</span> "
			+ (optSort ? "sorted" : "unsorted")
		dom.details.innerHTML = strAll +"<br>"+ display.join("")
		// add sub hashes
		let is102 = (CanvasRenderingContext2D.prototype.hasOwnProperty("direction") && Array(1).includes())
		groups.forEach(function(g) {
			let hash = mini(oData[g])
			let notation = ""
			// keep an eye on these two
			if (is102) {
				if (g == "2stable") {
					/* TB = "c43ffeaa"
						TB has no script which adds (after constructor)
						HTMLFrameElement: get contentWindow, get contentDocument
						HTMLObjectElement: get contentWindow, get contentDocument
					*/
					notation = (hash == "ae0c7c78" || hash == "c43ffeaa") ? green_tick : zNEW
				} else if (g == "3boring") {
					notation = hash == "d32e42ea" ? green_tick : zNEW
				}
			}
			dom[g].innerHTML = s6 + hash + sc + notation
		})
		dom.perf = Math.round(performance.now() - t0) +" ms"
	} catch (e) {
		dom.details = e+""
	}
}

Promise.all([
	get_globals()
]).then(function(){
	run()
})

</script>
</body>
</html>
